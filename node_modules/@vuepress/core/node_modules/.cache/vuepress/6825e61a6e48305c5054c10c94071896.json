{"remainingRequest":"/Users/chenzhe/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenzhe/blog/packages/theme-gungnir/layouts/Post.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenzhe/blog/packages/theme-gungnir/layouts/Post.vue","mtime":1630639090000},{"path":"/Users/chenzhe/blog/node_modules/cache-loader/dist/cjs.js","mtime":1632030570429},{"path":"/Users/chenzhe/blog/node_modules/babel-loader/lib/index.js","mtime":1623926664360},{"path":"/Users/chenzhe/blog/node_modules/cache-loader/dist/cjs.js","mtime":1632030570429},{"path":"/Users/chenzhe/blog/node_modules/vue-loader/lib/index.js","mtime":1632030570748}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBcnRpY2xlSGVhZGVyIGZyb20gIkB0aGVtZS9jb21wb25lbnRzL0FydGljbGVIZWFkZXIiOwppbXBvcnQgQ29tbW9uIGZyb20gIkB0aGVtZS9jb21wb25lbnRzL0NvbW1vbi52dWUiOwppbXBvcnQgQ2F0YWxvZyBmcm9tICJAdGhlbWUvY29tcG9uZW50cy9DYXRhbG9nIjsKaW1wb3J0IFBhZ2UgZnJvbSAiQHRoZW1lL2NvbXBvbmVudHMvUGFnZS52dWUiOwppbXBvcnQgeyB0aHJvdHRsZSB9IGZyb20gIkB0aGVtZS91dGlscy90aW1lIjsKCmNvbnN0IGNhdGFsb2dUb3BBYnNvbHV0ZSA9IDQwOwpjb25zdCBjYXRhbG9nVG9wRml4ZWQgPSA4MDsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUG9zdCIsCgogIGNvbXBvbmVudHM6IHsKICAgIEFydGljbGVIZWFkZXIsCiAgICBDb21tb24sCiAgICBDYXRhbG9nLAogICAgUGFnZQogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc0ZpeGVkOiBmYWxzZSwKICAgICAgY2F0YWxvZ1RvcDogMCwKICAgICAgaGVhZGVySGVpZ2h0OiAwLAogICAgICBzY3JlZW5XaWR0aDogMAogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgcGFnZUhlYWRlclN0eWxlKCkgewogICAgICB2YXIgc3R5bGUgPSB7fTsKICAgICAgaWYgKAogICAgICAgIHRoaXMuJHBhZ2UuZnJvbnRtYXR0ZXIuaGVhZGVyX3N0eWxlID09ICJpbWFnZSIgJiYKICAgICAgICB0aGlzLiRwYWdlLmZyb250bWF0dGVyLmhlYWRlcl9pbWcKICAgICAgKQogICAgICAgIHN0eWxlID0gewogICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBgdXJsKCR7dGhpcy4kd2l0aEJhc2UoCiAgICAgICAgICAgIHRoaXMuJHBhZ2UuZnJvbnRtYXR0ZXIuaGVhZGVyX2ltZywKICAgICAgICAgICAgdGhpcy4kdGhlbWVDb25maWcKICAgICAgICAgICl9KWAKICAgICAgICB9OwogICAgICBpZiAoIXRoaXMuJHNob3dDYXRhbG9nKSBzdHlsZS5wYWRkaW5nUmlnaHQgPSAiMCI7CiAgICAgIHJldHVybiBzdHlsZTsKICAgIH0KICB9LAoKICB3YXRjaDogewogICAgJHJvdXRlKCkgewogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5pbml0Q2F0YWxvZygpOwogICAgICB9KTsKICAgIH0KICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0Q2F0YWxvZygpOwoKICAgIGNvbnN0IHRoYXQgPSB0aGlzOwogICAgd2luZG93Lm9ucmVzaXplID0gKCkgPT4gewogICAgICByZXR1cm4gKCgpID0+IHsKICAgICAgICB0aGF0LmhlYWRlckhlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5wb3N0LWhlYWRlciIpLm9mZnNldEhlaWdodDsKICAgICAgICB0aGF0LnNjcmVlbldpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDsKICAgICAgICB0aGF0LmluaXRDYXRhbG9nKCk7CiAgICAgICAgdGhhdC5oYW5kbGVTY3JvbGwoKTsKICAgICAgfSkoKTsKICAgIH07CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigic2Nyb2xsIiwgdGhyb3R0bGUodGhpcy5oYW5kbGVTY3JvbGwsIDUwKSk7CiAgfSwKCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJzY3JvbGwiLCB0aHJvdHRsZSh0aGlzLmhhbmRsZVNjcm9sbCwgNTApKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBpbml0Q2F0YWxvZygpIHsKICAgICAgdGhpcy5oZWFkZXJIZWlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIucG9zdC1oZWFkZXIiKS5vZmZzZXRIZWlnaHQ7CiAgICAgIHRoaXMuc2NyZWVuV2lkdGggPSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoOwogICAgICBpZiAodGhpcy5zY3JlZW5XaWR0aCA8PSA3MTkpIHRoaXMuY2F0YWxvZ1RvcCA9IC0xNTsKICAgICAgLy8gJE1RTW9iaWxlCiAgICAgIGVsc2UgdGhpcy5jYXRhbG9nVG9wID0gdGhpcy5oZWFkZXJIZWlnaHQgKyBjYXRhbG9nVG9wQWJzb2x1dGU7CiAgICB9LAogICAgaGFuZGxlU2Nyb2xsKCkgewogICAgICBjb25zdCBjdXJyZW50VG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0OwogICAgICBpZiAoCiAgICAgICAgY3VycmVudFRvcCA+CiAgICAgICAgdGhpcy5oZWFkZXJIZWlnaHQgKyBjYXRhbG9nVG9wQWJzb2x1dGUgLSBjYXRhbG9nVG9wRml4ZWQKICAgICAgKSB7CiAgICAgICAgdGhpcy5pc0ZpeGVkID0gdHJ1ZTsKICAgICAgICB0aGlzLmNhdGFsb2dUb3AgPSBjYXRhbG9nVG9wRml4ZWQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc0ZpeGVkID0gZmFsc2U7CiAgICAgICAgdGhpcy5jYXRhbG9nVG9wID0gdGhpcy5oZWFkZXJIZWlnaHQgKyBjYXRhbG9nVG9wQWJzb2x1dGU7CiAgICAgIH0KICAgICAgLy8gJE1RTW9iaWxlCiAgICAgIGlmICh0aGlzLnNjcmVlbldpZHRoIDw9IDcxOSkgdGhpcy5jYXRhbG9nVG9wID0gLTE1OwogICAgfQogIH0KfTsK"},{"version":3,"sources":["Post.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Post.vue","sourceRoot":"packages/theme-gungnir/layouts","sourcesContent":["<template>\n  <Common class=\"post-container\">\n    <ArticleHeader\n      v-show=\"$page.title\"\n      class=\"post-header\"\n      :article-info=\"$page\"\n      :class=\"{ 'style-img': $page.frontmatter.header_style == 'image' }\"\n      :style=\"pageHeaderStyle\"\n    >\n      <div\n        v-if=\"\n          $page.frontmatter.header_style == 'image' &&\n          $page.frontmatter.header_mask\n        \"\n        class=\"header-mask\"\n        :style=\"{ background: $page.frontmatter.header_mask }\"\n      />\n    </ArticleHeader>\n    <Page />\n    <Catalog\n      :class=\"{ fixed: isFixed }\"\n      :style=\"{ top: `${catalogTop}px !important` }\"\n    />\n  </Common>\n</template>\n\n<script>\nimport ArticleHeader from \"@theme/components/ArticleHeader\";\nimport Common from \"@theme/components/Common.vue\";\nimport Catalog from \"@theme/components/Catalog\";\nimport Page from \"@theme/components/Page.vue\";\nimport { throttle } from \"@theme/utils/time\";\n\nconst catalogTopAbsolute = 40;\nconst catalogTopFixed = 80;\n\nexport default {\n  name: \"Post\",\n\n  components: {\n    ArticleHeader,\n    Common,\n    Catalog,\n    Page\n  },\n\n  data() {\n    return {\n      isFixed: false,\n      catalogTop: 0,\n      headerHeight: 0,\n      screenWidth: 0\n    };\n  },\n\n  computed: {\n    pageHeaderStyle() {\n      var style = {};\n      if (\n        this.$page.frontmatter.header_style == \"image\" &&\n        this.$page.frontmatter.header_img\n      )\n        style = {\n          backgroundImage: `url(${this.$withBase(\n            this.$page.frontmatter.header_img,\n            this.$themeConfig\n          )})`\n        };\n      if (!this.$showCatalog) style.paddingRight = \"0\";\n      return style;\n    }\n  },\n\n  watch: {\n    $route() {\n      this.$nextTick(() => {\n        this.initCatalog();\n      });\n    }\n  },\n\n  mounted() {\n    this.initCatalog();\n\n    const that = this;\n    window.onresize = () => {\n      return (() => {\n        that.headerHeight = document.querySelector(\".post-header\").offsetHeight;\n        that.screenWidth = document.body.clientWidth;\n        that.initCatalog();\n        that.handleScroll();\n      })();\n    };\n    window.addEventListener(\"scroll\", throttle(this.handleScroll, 50));\n  },\n\n  beforeDestroy() {\n    window.removeEventListener(\"scroll\", throttle(this.handleScroll, 50));\n  },\n\n  methods: {\n    initCatalog() {\n      this.headerHeight = document.querySelector(\".post-header\").offsetHeight;\n      this.screenWidth = document.body.clientWidth;\n      if (this.screenWidth <= 719) this.catalogTop = -15;\n      // $MQMobile\n      else this.catalogTop = this.headerHeight + catalogTopAbsolute;\n    },\n    handleScroll() {\n      const currentTop = window.pageYOffset;\n      if (\n        currentTop >\n        this.headerHeight + catalogTopAbsolute - catalogTopFixed\n      ) {\n        this.isFixed = true;\n        this.catalogTop = catalogTopFixed;\n      } else {\n        this.isFixed = false;\n        this.catalogTop = this.headerHeight + catalogTopAbsolute;\n      }\n      // $MQMobile\n      if (this.screenWidth <= 719) this.catalogTop = -15;\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\">\n@require '../styles/mixins.styl'\n@require '../styles/wrapper.styl'\n\n.post-container\n  .post-header\n    max-width 100%\n    position relative\n    padding-top 6rem\n    background-repeat no-repeat\n    background-position center\n    background-size cover\n    .header-content\n      z-index 2\n      position relative\n      .title, .subtitle, .tags, .icons\n        padding 0 2.5rem\n      .title\n        font-size 50px\n        font-weight bold\n      .subtitle\n        margin-top -10px\n        font-weight 400\n        font-size 30px\n    &.style-img\n      padding-top 7.5rem\n      padding-bottom 9rem\n      .title, .subtitle, .tag, .icon\n        color #fff\n        border-color #fff\n    .header-mask\n      width 100%\n      height 100%\n      position absolute\n      margin-top -7.5rem\n      z-index 1\n\n  .page\n    max-width $contentWidth\n    margin 0 auto !important\n    padding-bottom 5rem\n    padding-top 1rem\n    h1\n      font-size 50px\n    h2, h3, h4, h5, h6\n      font-weight bold\n    h2\n      font-size 30px\n    h3\n      font-size 24px\n    h4\n      font-size 21px\n    h5\n      font-size 19px\n      color var(--text-color-sub)\n    h6\n      font-size 16px\n      color var(--text-color-sub)\n    a.header-anchor\n      opacity 1\n    .pager\n      padding 0rem 2.5rem\n      margin-top 30px\n      a\n        text-align center\n        width 45%\n        padding 10px 5px\n    .vssue-comment-wrapper\n      @extend $wrapper\n      margin-top 10rem\n      margin-bottom -3rem\n\n  .catalog\n    position absolute\n    right 1rem\n    height 100%\n    overflow-y scroll\n    &.fixed\n      position fixed\n      height auto\n      bottom 10rem\n    &::-webkit-scrollbar\n      width 0\n      height 0\n\n@media (max-width: $MQLarge)\n  .post-container\n    .page\n      padding-right $catalogWidth\n      max-width 100%\n    .post-header .header-content\n      max-width 100%\n      .title, .subtitle, .tags, .icons\n        padding 0\n\n@media (max-width: $MQMobile)\n  .post-container\n    .post-header\n      padding-top 4rem\n      padding-bottom 0\n      .header-content\n        .title\n          font-size 30px\n        .subtitle\n          font-size 16px\n          margin-top -5px\n      &.style-img\n        padding-top 3rem\n        padding-bottom 4rem\n      .header-mask\n        margin-top -3.1rem\n    .page\n      padding-right 0\n      h1\n        font-size 30px\n      h2\n        font-size 25px\n      h3\n        font-size 22px\n      h4\n        font-size 21px\n      h5\n        font-size 19px\n      h6\n        font-size 16px\n      .pager\n        padding 0 2rem\n      .vssue-comment-wrapper\n        padding 1rem\n        margin-top 13rem\n        margin-bottom -5rem\n    .catalog\n      transition(transform .5s)\n      transform(translateX(calc(100% + 2rem)))\n      position fixed\n      right -2px\n      padding-top 2rem\n      height 100%\n      background-color var(--bg-color)\n      z-index 5\n      &.open\n        transform(translateX(0))\n        box-shadow var(--box-shadow)\n      &.fixed\n        height 100%\n      li\n        border-left none\n        &.active\n          border-left 2px solid var(--accent-color)\n\n@media (max-width: $MQMobileNarrow)\n  .post-container\n    .page .pager\n      padding 0 1rem\n</style>\n\n<style src=\"../styles/theme.styl\" lang=\"stylus\"></style>\n"]}]}