{"remainingRequest":"/Users/chenzhe/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenzhe/blog/packages/theme-gungnir/components/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenzhe/blog/packages/theme-gungnir/components/Home.vue","mtime":1630639090000},{"path":"/Users/chenzhe/blog/node_modules/cache-loader/dist/cjs.js","mtime":1632030570429},{"path":"/Users/chenzhe/blog/node_modules/babel-loader/lib/index.js","mtime":1623926664360},{"path":"/Users/chenzhe/blog/node_modules/cache-loader/dist/cjs.js","mtime":1632030570429},{"path":"/Users/chenzhe/blog/node_modules/vue-loader/lib/index.js","mtime":1632030570748}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQb3N0TGlzdCBmcm9tICJAdGhlbWUvY29tcG9uZW50cy9Qb3N0TGlzdCI7CmltcG9ydCBTTlMgZnJvbSAiQHRoZW1lL2NvbXBvbmVudHMvU05TIjsKaW1wb3J0IHsgdGhyb3R0bGUgfSBmcm9tICJAdGhlbWUvdXRpbHMvdGltZSI7Cgpjb25zdCBERUZBVUxUX0lNRyA9IHJlcXVpcmUoIkB0aGVtZS9hc3NldHMvZGVmYXVsdC13YWxscGFwZXIuanBlZyIpOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFBvc3RMaXN0LAogICAgU05TCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIHRhZ3M6IFtdLAogICAgICBiZ0ltYWdlSUQ6IDAsCiAgICAgIGJnSW1hZ2VQYXRoOiAiIiwKICAgICAgaGVhZGVyT3BhY2l0eTogMQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBoZXJvSGVpZ2h0KCkgewogICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmhlcm8iKS5jbGllbnRIZWlnaHQ7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgLy8gaGVhZGVyIGltYWdlCiAgICBpZiAodGhpcy4kdGhlbWVDb25maWcuaG9tZUhlYWRlckltYWdlcy5sb2NhbCkgewogICAgICB0aGlzLmJnSW1hZ2VJRCA9IE1hdGguZmxvb3IoCiAgICAgICAgTWF0aC5yYW5kb20oKSAqIHRoaXMuJHRoZW1lQ29uZmlnLmhvbWVIZWFkZXJJbWFnZXMubG9jYWwubGVuZ3RoCiAgICAgICk7CiAgICAgIHRoaXMuc2V0SW1hZ2VQYXRoQnlJRCgpOwogICAgfSBlbHNlIHRoaXMuZ2V0VW5zcGxhc2goKTsKCiAgICAvLyBzY3JvbGwgZXZlbnQgbGlzdGVuZXIKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLCB0aHJvdHRsZSh0aGlzLmhhbmRsZVNjcm9sbCwgNTApKTsKCiAgICAvLyBmZXRjaCBoaXRva290byBhcGkKICAgIGlmICh0aGlzLiR0aGVtZUNvbmZpZy5oaXRva290bykgewogICAgICBjb25zdCBISVRPS09UT19VUkwgPQogICAgICAgIHRoaXMuJHRoZW1lQ29uZmlnLmhpdG9rb3RvLmFwaSB8fCAiaHR0cHM6Ly92MS5oaXRva290by5jbiI7CiAgICAgIGZldGNoKEhJVE9LT1RPX1VSTCkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSkKICAgICAgICAudGhlbigoZGF0YSkgPT4gewogICAgICAgICAgY29uc3QgaGl0b2tvdG8gPSB0aGlzLiRyZWZzLmhpdG9rb3RvOwogICAgICAgICAgaGl0b2tvdG8uaW5uZXJUZXh0ID0gZGF0YS5oaXRva290bzsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChgR2V0ICR7SElUT0tPVE9fVVJMfSBlcnJvcjogYCwgY29uc29sZS5lcnJvcik7CiAgICB9CiAgfSwKCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJzY3JvbGwiLCB0aHJvdHRsZSh0aGlzLmhhbmRsZVNjcm9sbCwgNTApKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICAvLyBzd2l0Y2ggdG8gdGhlIG5leHQgaGVhZGVyIGltYWdlCiAgICBzd2l0Y2hJbWFnZShuKSB7CiAgICAgIGlmICh0aGlzLiR0aGVtZUNvbmZpZy5ob21lSGVhZGVySW1hZ2VzLmxvY2FsKSB7CiAgICAgICAgY29uc3QgbGVuID0gdGhpcy4kdGhlbWVDb25maWcuaG9tZUhlYWRlckltYWdlcy5sb2NhbC5sZW5ndGg7CiAgICAgICAgdGhpcy5iZ0ltYWdlSUQgPSAodGhpcy5iZ0ltYWdlSUQgKyBuICsgbGVuKSAlIGxlbjsKICAgICAgICB0aGlzLnNldEltYWdlUGF0aEJ5SUQoKTsKICAgICAgfSBlbHNlIHRoaXMuZ2V0VW5zcGxhc2goKTsKICAgIH0sCiAgICAvLyBnZXQgYSBuZXcgaW1hZ2UgZnJvbSBVbnNwbGFzaAogICAgZ2V0VW5zcGxhc2goKSB7CiAgICAgIGNvbnN0IFVOU1BMQVNIX1VSTCA9IHRoaXMuJHRoZW1lQ29uZmlnLmhvbWVIZWFkZXJJbWFnZXMuYXBpOwogICAgICBmZXRjaChVTlNQTEFTSF9VUkwpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLmJnSW1hZ2VQYXRoID0gcmVzcG9uc2UudXJsOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coYEdldCAke1VOU1BMQVNIX1VSTH0gZXJyb3I6IGAsIGVycm9yKTsKICAgICAgICAgIC8vIGZhbGwgdG8gZGVmYXVsdCBpbWFnZQogICAgICAgICAgdGhpcy5iZ0ltYWdlUGF0aCA9IERFRkFVTFRfSU1HOwogICAgICAgIH0pOwogICAgfSwKICAgIC8vIHNldCBsb2NhbCBpbWFnZSBwYXRoCiAgICBzZXRJbWFnZVBhdGhCeUlEKCkgewogICAgICB0aGlzLmJnSW1hZ2VQYXRoID0gdGhpcy4kd2l0aEJhc2UoCiAgICAgICAgdGhpcy4kdGhlbWVDb25maWcuaG9tZUhlYWRlckltYWdlcy5sb2NhbFt0aGlzLmJnSW1hZ2VJRF0ucGF0aAogICAgICApOwogICAgfSwKICAgIHNjcm9sbFRvUG9zdCgpIHsKICAgICAgd2luZG93LnNjcm9sbFRvKHsKICAgICAgICB0b3A6IHRoaXMuaGVyb0hlaWdodCwKICAgICAgICBiZWhhdmlvcjogInNtb290aCIKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2Nyb2xsKCkgewogICAgICBjb25zdCBjdXJyZW50VG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0OwogICAgICBjb25zdCB3aW5kb3dIZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0OwogICAgICB0aGlzLmhlYWRlck9wYWNpdHkgPSAxIC0gKGN1cnJlbnRUb3AgKiAxLjIpIC8gd2luZG93SGVpZ2h0OwogICAgfQogIH0KfTsK"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"packages/theme-gungnir/components","sourcesContent":["<template>\n  <div class=\"home-blog\">\n    <div class=\"hero\" :style=\"{ 'background-image': `url(${bgImagePath})` }\">\n      <div\n        v-if=\"\n          $themeConfig.homeHeaderImages.local &&\n          $themeConfig.homeHeaderImages.local[bgImageID].mask\n        \"\n        class=\"header-mask\"\n        :style=\"{\n          background: $themeConfig.homeHeaderImages.local[bgImageID].mask\n        }\"\n      />\n\n      <div class=\"header-content\" :style=\"{ opacity: headerOpacity }\">\n        <img\n          class=\"hero-avatar hide-on-mobile\"\n          :src=\"$withBase($themeConfig.personalInfo.avatar)\"\n          alt=\"hero\"\n        />\n\n        <div v-if=\"$themeConfig.hitokoto\" class=\"hero-bubble\">\n          <div class=\"hero-bubble__body\">\n            <p ref=\"hitokoto\">正在加载一言...</p>\n          </div>\n          <div class=\"hero-bubble__tile\" />\n        </div>\n\n        <div class=\"hero-info\">\n          <div class=\"hero-info__text\">\n            <h1>{{ $themeConfig.personalInfo.name || $title }}</h1>\n            <p class=\"description\">\n              {{ $themeConfig.personalInfo.description || $description }}\n            </p>\n          </div>\n        </div>\n\n        <SNS class=\"hide-on-mobile\" large />\n\n        <button class=\"img-prev hide-on-mobile\" @click=\"switchImage(-1)\">\n          <v-icon name=\"fa-chevron-left\" />\n        </button>\n        <button class=\"img-next hide-on-mobile\" @click=\"switchImage(1)\">\n          <v-icon name=\"fa-chevron-right\" />\n        </button>\n\n        <span class=\"arrow-down hide-on-mobile\" @click=\"scrollToPost()\">\n          <v-icon name=\"fa-chevron-down\" animation=\"float\" scale=\"1.7\" />\n        </span>\n      </div>\n    </div>\n\n    <PostList class=\"home-blog-wrapper\" :data=\"$pagination.pages\" />\n  </div>\n</template>\n\n<script>\nimport PostList from \"@theme/components/PostList\";\nimport SNS from \"@theme/components/SNS\";\nimport { throttle } from \"@theme/utils/time\";\n\nconst DEFAULT_IMG = require(\"@theme/assets/default-wallpaper.jpeg\");\n\nexport default {\n  components: {\n    PostList,\n    SNS\n  },\n  data() {\n    return {\n      currentPage: 1,\n      tags: [],\n      bgImageID: 0,\n      bgImagePath: \"\",\n      headerOpacity: 1\n    };\n  },\n  computed: {\n    heroHeight() {\n      return document.querySelector(\".hero\").clientHeight;\n    }\n  },\n  mounted() {\n    // header image\n    if (this.$themeConfig.homeHeaderImages.local) {\n      this.bgImageID = Math.floor(\n        Math.random() * this.$themeConfig.homeHeaderImages.local.length\n      );\n      this.setImagePathByID();\n    } else this.getUnsplash();\n\n    // scroll event listener\n    window.addEventListener(\"scroll\", throttle(this.handleScroll, 50));\n\n    // fetch hitokoto api\n    if (this.$themeConfig.hitokoto) {\n      const HITOKOTO_URL =\n        this.$themeConfig.hitokoto.api || \"https://v1.hitokoto.cn\";\n      fetch(HITOKOTO_URL)\n        .then((response) => response.json())\n        .then((data) => {\n          const hitokoto = this.$refs.hitokoto;\n          hitokoto.innerText = data.hitokoto;\n        })\n        .catch(`Get ${HITOKOTO_URL} error: `, console.error);\n    }\n  },\n\n  beforeDestroy() {\n    window.removeEventListener(\"scroll\", throttle(this.handleScroll, 50));\n  },\n\n  methods: {\n    // switch to the next header image\n    switchImage(n) {\n      if (this.$themeConfig.homeHeaderImages.local) {\n        const len = this.$themeConfig.homeHeaderImages.local.length;\n        this.bgImageID = (this.bgImageID + n + len) % len;\n        this.setImagePathByID();\n      } else this.getUnsplash();\n    },\n    // get a new image from Unsplash\n    getUnsplash() {\n      const UNSPLASH_URL = this.$themeConfig.homeHeaderImages.api;\n      fetch(UNSPLASH_URL)\n        .then((response) => {\n          this.bgImagePath = response.url;\n        })\n        .catch((error) => {\n          console.log(`Get ${UNSPLASH_URL} error: `, error);\n          // fall to default image\n          this.bgImagePath = DEFAULT_IMG;\n        });\n    },\n    // set local image path\n    setImagePathByID() {\n      this.bgImagePath = this.$withBase(\n        this.$themeConfig.homeHeaderImages.local[this.bgImageID].path\n      );\n    },\n    scrollToPost() {\n      window.scrollTo({\n        top: this.heroHeight,\n        behavior: \"smooth\"\n      });\n    },\n    handleScroll() {\n      const currentTop = window.pageYOffset;\n      const windowHeight = document.documentElement.clientHeight;\n      this.headerOpacity = 1 - (currentTop * 1.2) / windowHeight;\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\">\n@require '../styles/mixins.styl'\n@require '../styles/mode.styl'\n\n.home-blog\n  padding 0\n  padding-bottom 150px\n  margin 0px auto\n  .hero\n    margin 0 auto\n    position relative\n    box-sizing border-box\n    height 100vh\n    display flex\n    align-items center\n    justify-content center\n    text-align center\n    overflow hidden\n    background-position center\n    background-size cover\n\n    .header-mask\n      width 100%\n      height 100%\n      position absolute\n      z-index 1\n\n    .header-content\n      z-index 2\n      width 36%\n      max-width 500px\n      display flex\n      flex-direction column\n      align-items center\n      justify-content center\n\n      .hero-avatar\n        width 120px\n        height 120px\n        cursor auto\n        padding 5px\n        border-radius 100%\n        transition(all ease 1s)\n        box-shadow inset 0 0 10px #000\n        &:hover\n          transform(rotate(360deg))\n        &:hover + .hero-bubble\n          opacity 1\n\n      .hero-bubble\n        opacity 0\n        position absolute\n        left 50%\n        margin-left 100px\n        top 50%\n        margin-top -200px\n        // float up and down\n        animation bubbleFloat 2s infinite\n        -webkit-animation bubbleFloat 2s infinite\n        animation-timing-function ease-in-out\n        -webkit-animation-timing-function ease-in-out\n        -webkit-animation-direction alternate\n        animation-direction alternate\n        transition(opacity .4s)\n        &__body\n          min-width 150px\n          max-width 250px\n          min-height 80px\n          background rgba(0, 0, 0, .5)\n          border-radius 10px\n          p\n            font-size 15px\n            padding 10px 20px\n            color #fff\n            text-align left\n            line-height 1.7\n        &__tile\n          position absolute\n          content ''\n          margin-left -23px\n          top 0\n          margin-top 60px\n          width 23px\n          height 44px\n          border-width 0\n          border-style solid\n          border-top-width 20px\n          border-radius 56px 0 0 0\n          color rgba(0, 0, 0, .5)\n      @keyframes bubbleFloat\n        0%\n          transform(translateY(0))\n        100%\n          transform(translateY(10px))\n      @-webkit-keyframes bubbleFloat\n        0%\n          transform(translateY(0))\n        100%\n          transform(translateY(10px))\n\n      .hero-info\n        background rgba(0, 0, 0, .5)\n        width 100%\n        padding 17px\n        letter-spacing 0\n        border-radius 10px\n        box-sizing initial\n        white-space nowrap\n        margin-top 20px\n        &__text\n          padding-top 0\n          padding-bottom 0\n          color white\n          h1\n            display block\n            font-size 25px\n            font-weight 700\n            line-height 20px\n            margin-top 0\n          p\n            font-size 18px\n            font-weight 300\n            line-height 15px\n            margin-bottom 0\n\n      .sns-wrapper\n        margin-top 10px\n\n      .img-prev, .img-next\n        cursor pointer\n        position absolute\n        top 50%\n        margin-top -30px\n        width auto\n        padding 15px 7px\n        color rgba(255, 255, 255, 0.6)\n        background-color rgba(0, 0, 0, .3)\n        border none\n        outline none\n        transition(.6s ease)\n        &:hover\n          color #fff\n          background-color rgba(0, 0, 0, .6)\n      .img-prev\n        left 0\n        border-radius 0 3px 3px 0\n      .img-next\n        right 0\n        border-radius 3px 0 0 3px\n\n      .arrow-down\n        position absolute\n        bottom 20px\n        left 50%\n        margin-left -17px\n        cursor pointer\n        .ov-icon\n          color #ffffff\n          transition(.4s ease)\n          &:active,\n          &:hover\n            color #a7a7a7\n\n  .home-blog-wrapper\n    margin 20px auto 0\n    max-width $homePageWidth\n\n@media (min-width: $MQIpad)\n  .home-blog .hero\n    background-attachment fixed\n    .hero-info__text\n      gungnir-font()\n\n@media (max-width: $MQIpad)\n  .home-blog\n    .hide-on-mobile\n      display none\n    .hero\n      height auto !important\n      padding 150px 0\n      .hero-info\n        background transparent !important\n        width auto !important\n        position relative !important\n        &__text h1\n          font-size 80px !important\n    .home-blog-wrapper\n      padding 0 13px 0 14px\n\n@media (max-width: $MQMobile)\n  .home-blog\n    .hero\n      padding 80px 0 60px\n      .header-mask\n        height calc(100% + 1.2rem)\n      .hero-info__text h1\n        font-size 50px !important\n</style>\n"]}]}