{"remainingRequest":"/Users/chenzhe/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenzhe/blog/packages/theme-gungnir/components/Page.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenzhe/blog/packages/theme-gungnir/components/Page.vue","mtime":1630639090000},{"path":"/Users/chenzhe/blog/node_modules/cache-loader/dist/cjs.js","mtime":1632030570429},{"path":"/Users/chenzhe/blog/node_modules/babel-loader/lib/index.js","mtime":1623926664360},{"path":"/Users/chenzhe/blog/node_modules/cache-loader/dist/cjs.js","mtime":1632030570429},{"path":"/Users/chenzhe/blog/node_modules/vue-loader/lib/index.js","mtime":1632030570748}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBcnRpY2xlSGVhZGVyIGZyb20gIkB0aGVtZS9jb21wb25lbnRzL0FydGljbGVIZWFkZXIiOwppbXBvcnQgUGFnZU5hdiBmcm9tICJAdGhlbWUvY29tcG9uZW50cy9QYWdlTmF2IjsKaW1wb3J0IFBhZ2VFZGl0IGZyb20gIkB0aGVtZS9jb21wb25lbnRzL1BhZ2VFZGl0IjsKaW1wb3J0IFBhZ2VyIGZyb20gIkB0aGVtZS9jb21wb25lbnRzL1BhZ2VyIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBBcnRpY2xlSGVhZGVyLAogICAgUGFnZU5hdiwKICAgIFBhZ2VFZGl0LAogICAgUGFnZXIKICB9LAoKICBwcm9wczogewogICAgc2lkZWJhckl0ZW1zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiBbXQogICAgfQogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc0hhc0tleTogdHJ1ZQogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgc2hvdWxkU2hvd0NvbW1lbnRzKCkgewogICAgICBjb25zdCB7IGlzU2hvd0NvbW1lbnRzIH0gPSB0aGlzLiRmcm9udG1hdHRlcjsKICAgICAgY29uc3QgeyBzaG93Q29tbWVudCB9ID0gdGhpcy4kdGhlbWVDb25maWcudmFsaW5lQ29uZmlnIHx8IHsKICAgICAgICBzaG93Q29tbWVudDogdHJ1ZQogICAgICB9OwogICAgICByZXR1cm4gKAogICAgICAgIChzaG93Q29tbWVudCAhPT0gZmFsc2UgJiYgaXNTaG93Q29tbWVudHMgIT09IGZhbHNlKSB8fAogICAgICAgIChzaG93Q29tbWVudCA9PT0gZmFsc2UgJiYgaXNTaG93Q29tbWVudHMgPT09IHRydWUpCiAgICAgICk7CiAgICB9LAogICAgZ2V0UG9zdEluZGV4KCkgewogICAgICByZXR1cm4gdGhpcy4kZ2V0QWxsUG9zdHMuZmluZEluZGV4KAogICAgICAgIChpdGVtKSA9PiBpdGVtLnBhdGggPT0gdGhpcy4kcGFnZS5wYXRoCiAgICAgICk7CiAgICB9LAogICAgZ2V0UG9zdFBhZ2VyKCkgewogICAgICBjb25zdCBhbGxQb3N0cyA9IHRoaXMuJGdldEFsbFBvc3RzOwogICAgICBjb25zdCBwb3N0SWQgPSB0aGlzLmdldFBvc3RJbmRleDsKICAgICAgcmV0dXJuIHsKICAgICAgICBuZXh0OgogICAgICAgICAgcG9zdElkID4gMAogICAgICAgICAgICA/IHsKICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuJHRoZW1lTG9jYWxlcy5wb3N0TmV4dCwKICAgICAgICAgICAgICAgIHN1YnRleHQ6IGFsbFBvc3RzW3Bvc3RJZCAtIDFdLnRpdGxlLAogICAgICAgICAgICAgICAgbGluazogYWxsUG9zdHNbcG9zdElkIC0gMV0ucGF0aAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgOiBudWxsLAogICAgICAgIHByZXY6CiAgICAgICAgICBwb3N0SWQgPCBhbGxQb3N0cy5sZW5ndGggLSAxCiAgICAgICAgICAgID8gewogICAgICAgICAgICAgICAgdGV4dDogdGhpcy4kdGhlbWVMb2NhbGVzLnBvc3RQcmV2LAogICAgICAgICAgICAgICAgc3VidGV4dDogYWxsUG9zdHNbcG9zdElkICsgMV0udGl0bGUsCiAgICAgICAgICAgICAgICBsaW5rOiBhbGxQb3N0c1twb3N0SWQgKyAxXS5wYXRoCiAgICAgICAgICAgICAgfQogICAgICAgICAgICA6IG51bGwKICAgICAgfTsKICAgIH0KICB9LAoKICB3YXRjaDogewogICAgJHJvdXRlKCkgewogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5hZGRDb2RlQnRuKCk7CiAgICAgIH0pOwogICAgfQogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmFkZENvZGVCdG4oKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFkZENvZGVCdG4oKSB7CiAgICAgIC8vIGZ1bGwgc2NyZWVuIHRoZSBjb2RlIGJsb2NrcwogICAgICBjb25zdCBjb2RlQmxvY2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiZGl2W2NsYXNzKj0nbGFuZ3VhZ2UtJ10iKTsKICAgICAgY29uc3QgaHRtbERvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImh0bWwiKTsKICAgICAgZm9yIChsZXQgYmxvY2sgb2YgY29kZUJsb2NrcykgewogICAgICAgIGlmICh0aGlzLmNoZWNrQnRuKGJsb2NrKSkgY29udGludWU7CgogICAgICAgIGxldCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgiY29kZS1idXR0b24iKTsKCiAgICAgICAgLy8gY2xpY2sgdG8gZnVsbCBzY3JlZW4gdGhlIGNvZGUgYmxvY2sKICAgICAgICBidG4ub25jbGljayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChibG9jay5jbGFzc0xpc3QuY29udGFpbnMoImNvZGUtYmxvY2stZnVsbHNjcmVlbiIpKSB7CiAgICAgICAgICAgIGJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoImNvZGUtYmxvY2stZnVsbHNjcmVlbiIpOwogICAgICAgICAgICBodG1sRG9tLmNsYXNzTGlzdC5yZW1vdmUoInNjcmVlbi1maXhlZCIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYmxvY2suY2xhc3NMaXN0LmFkZCgiY29kZS1ibG9jay1mdWxsc2NyZWVuIik7CiAgICAgICAgICAgIGh0bWxEb20uY2xhc3NMaXN0LmFkZCgic2NyZWVuLWZpeGVkIik7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgYmxvY2suYXBwZW5kQ2hpbGQoYnRuKTsKICAgICAgfQogICAgfSwKICAgIGNoZWNrQnRuKGJsb2NrKSB7CiAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKGJsb2NrLmNoaWxkcmVuKS5maW5kKCh2YWx1ZSkgPT4gewogICAgICAgIGlmICh2YWx1ZS5jbGFzc0xpc3QuY29udGFpbnMoImNvZGUtYnV0dG9uIikpIHJldHVybiB0cnVlOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["Page.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Page.vue","sourceRoot":"packages/theme-gungnir/components","sourcesContent":["<template>\n  <main class=\"page\">\n    <ArticleHeader\n      v-if=\"$page.id != 'posts'\"\n      v-show=\"$page.title\"\n      :article-info=\"$page\"\n      class=\"doc-header\"\n    />\n    <Content class=\"theme-content\" />\n    <PageEdit />\n    <PageNav\n      v-if=\"$page.id != 'posts' && sidebarItems\"\n      v-bind=\"{ sidebarItems }\"\n    />\n    <Pager\n      v-if=\"$page.id == 'posts' && getPostIndex != -1\"\n      :data=\"getPostPager\"\n    />\n    <!--\n      Use prop `key` to update vssue when navigating directly from one\n      <Page> to another.\n      See here: https://github.com/meteorlxy/vssue/issues/87\n    -->\n    <Vssue\n      v-if=\"$themeConfig.comment\"\n      :key=\"$route.path\"\n      class=\"vssue-comment-wrapper\"\n      :title=\"$page.title + ' - ' + $site.title\"\n    />\n  </main>\n</template>\n\n<script>\nimport ArticleHeader from \"@theme/components/ArticleHeader\";\nimport PageNav from \"@theme/components/PageNav\";\nimport PageEdit from \"@theme/components/PageEdit\";\nimport Pager from \"@theme/components/Pager\";\n\nexport default {\n  components: {\n    ArticleHeader,\n    PageNav,\n    PageEdit,\n    Pager\n  },\n\n  props: {\n    sidebarItems: {\n      type: Array,\n      default: () => []\n    }\n  },\n\n  data() {\n    return {\n      isHasKey: true\n    };\n  },\n\n  computed: {\n    shouldShowComments() {\n      const { isShowComments } = this.$frontmatter;\n      const { showComment } = this.$themeConfig.valineConfig || {\n        showComment: true\n      };\n      return (\n        (showComment !== false && isShowComments !== false) ||\n        (showComment === false && isShowComments === true)\n      );\n    },\n    getPostIndex() {\n      return this.$getAllPosts.findIndex(\n        (item) => item.path == this.$page.path\n      );\n    },\n    getPostPager() {\n      const allPosts = this.$getAllPosts;\n      const postId = this.getPostIndex;\n      return {\n        next:\n          postId > 0\n            ? {\n                text: this.$themeLocales.postNext,\n                subtext: allPosts[postId - 1].title,\n                link: allPosts[postId - 1].path\n              }\n            : null,\n        prev:\n          postId < allPosts.length - 1\n            ? {\n                text: this.$themeLocales.postPrev,\n                subtext: allPosts[postId + 1].title,\n                link: allPosts[postId + 1].path\n              }\n            : null\n      };\n    }\n  },\n\n  watch: {\n    $route() {\n      this.$nextTick(() => {\n        this.addCodeBtn();\n      });\n    }\n  },\n\n  mounted() {\n    this.addCodeBtn();\n  },\n  methods: {\n    addCodeBtn() {\n      // full screen the code blocks\n      const codeBlocks = document.querySelectorAll(\"div[class*='language-']\");\n      const htmlDom = document.querySelector(\"html\");\n      for (let block of codeBlocks) {\n        if (this.checkBtn(block)) continue;\n\n        let btn = document.createElement(\"div\");\n        btn.classList.add(\"code-button\");\n\n        // click to full screen the code block\n        btn.onclick = function () {\n          if (block.classList.contains(\"code-block-fullscreen\")) {\n            block.classList.remove(\"code-block-fullscreen\");\n            htmlDom.classList.remove(\"screen-fixed\");\n          } else {\n            block.classList.add(\"code-block-fullscreen\");\n            htmlDom.classList.add(\"screen-fixed\");\n          }\n        };\n\n        block.appendChild(btn);\n      }\n    },\n    checkBtn(block) {\n      return Object.values(block.children).find((value) => {\n        if (value.classList.contains(\"code-button\")) return true;\n        return false;\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\">\n@require '../styles/wrapper.styl'\n@require '../styles/mixins.styl'\n\n.page\n  position relative\n  padding-top 5rem\n  padding-bottom 2rem\n  display block\n  overflow-x hidden\n  margin-left $sidebarWidth\n  .doc-header\n    color var(--text-color)\n    padding-top 0\n    padding-bottom 0\n    .title\n      font-weight bold\n      line-height 1.1\n  .vssue-comment-wrapper\n    @extend $wrapper\n    padding 2rem 0\n    margin-top 3rem\n\n@media (max-width: $MQLarge)\n  .page\n    .vssue-comment-wrapper\n      padding 2rem\n\n@media (max-width: $MQNarrow)\n  .page\n    margin-left $mobileSidebarWidth\n\n@media (max-width: $MQMobile)\n  .page\n    padding-top 3rem\n    margin-left 0\n\n@media (max-width: $MQMobileNarrow)\n  .page\n    .vssue-comment-wrapper\n      padding 1rem\n</style>\n"]}]}