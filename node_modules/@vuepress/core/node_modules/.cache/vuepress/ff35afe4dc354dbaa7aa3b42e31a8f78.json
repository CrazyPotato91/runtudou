{"remainingRequest":"/Users/chenzhe/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenzhe/blog/packages/theme-gungnir/components/SearchPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenzhe/blog/packages/theme-gungnir/components/SearchPage.vue","mtime":1630639090000},{"path":"/Users/chenzhe/blog/node_modules/cache-loader/dist/cjs.js","mtime":1632030570429},{"path":"/Users/chenzhe/blog/node_modules/babel-loader/lib/index.js","mtime":1623926664360},{"path":"/Users/chenzhe/blog/node_modules/cache-loader/dist/cjs.js","mtime":1632030570429},{"path":"/Users/chenzhe/blog/node_modules/vue-loader/lib/index.js","mtime":1632030570748}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtYXRjaFF1ZXJ5IGZyb20gIkB2dWVwcmVzcy9wbHVnaW4tc2VhcmNoL21hdGNoLXF1ZXJ5IjsKCi8qIGdsb2JhbCBTRUFSQ0hfTUFYX1NVR0dFU1RJT05TLCBTRUFSQ0hfUEFUSFMsIFNFQVJDSF9IT1RLRVlTICovCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU2VhcmNoQm94IiwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHF1ZXJ5OiAiIiwKICAgICAgZm9jdXNlZDogZmFsc2UsCiAgICAgIGZvY3VzSW5kZXg6IDAsCiAgICAgIHBsYWNlaG9sZGVyOiB1bmRlZmluZWQKICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIHNob3dTdWdnZXN0aW9ucygpIHsKICAgICAgcmV0dXJuIHRoaXMuc3VnZ2VzdGlvbnMgJiYgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGg7CiAgICB9LAoKICAgIHN1Z2dlc3Rpb25zKCkgewogICAgICBjb25zdCBxdWVyeSA9IHRoaXMucXVlcnkudHJpbSgpLnRvTG93ZXJDYXNlKCk7CiAgICAgIGlmICghcXVlcnkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHsgcGFnZXMgfSA9IHRoaXMuJHNpdGU7CiAgICAgIGNvbnN0IG1heCA9CiAgICAgICAgdGhpcy4kc2l0ZS50aGVtZUNvbmZpZy5zZWFyY2hNYXhTdWdnZXN0aW9ucyB8fCBTRUFSQ0hfTUFYX1NVR0dFU1RJT05TOwogICAgICBjb25zdCBsb2NhbGVQYXRoID0gdGhpcy4kbG9jYWxlUGF0aDsKICAgICAgY29uc3QgcmVzID0gW107CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFnZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAocmVzLmxlbmd0aCA+PSBtYXgpIGJyZWFrOwogICAgICAgIGNvbnN0IHAgPSBwYWdlc1tpXTsKCiAgICAgICAgLy8gd2Ugb25seSBzZWFyY2ggcG9zdHMKICAgICAgICBpZiAocC5pZCAhPSAicG9zdHMiKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIC8vIGZpbHRlciBvdXQgcmVzdWx0cyB0aGF0IGRvIG5vdCBtYXRjaCBjdXJyZW50IGxvY2FsZQogICAgICAgIGlmICh0aGlzLmdldFBhZ2VMb2NhbGVQYXRoKHApICE9PSBsb2NhbGVQYXRoKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIC8vIGZpbHRlciBvdXQgcmVzdWx0cyB0aGF0IGRvIG5vdCBtYXRjaCBzZWFyY2hhYmxlIHBhdGhzCiAgICAgICAgaWYgKCF0aGlzLmlzU2VhcmNoYWJsZShwKSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICAvLyB0aXRsZSBhbmQgdGFncwogICAgICAgIGlmIChtYXRjaFF1ZXJ5KHF1ZXJ5LCBwKSkgewogICAgICAgICAgcmVzLnB1c2gocCk7CiAgICAgICAgfQogICAgICAgIC8vIHN1YnRpdGxlCiAgICAgICAgZWxzZSBpZiAoCiAgICAgICAgICBwLmZyb250bWF0dGVyLnN1YnRpdGxlICYmCiAgICAgICAgICBtYXRjaFF1ZXJ5KHF1ZXJ5LCBwLCBwLmZyb250bWF0dGVyLnN1YnRpdGxlKQogICAgICAgICkgewogICAgICAgICAgcmVzLnB1c2gocCk7CiAgICAgICAgfQogICAgICAgIC8vIGhlYWRlcnMKICAgICAgICBlbHNlIGlmIChwLmhlYWRlcnMpIHsKICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcC5oZWFkZXJzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGlmIChyZXMubGVuZ3RoID49IG1heCkgYnJlYWs7CiAgICAgICAgICAgIGNvbnN0IGggPSBwLmhlYWRlcnNbal07CiAgICAgICAgICAgIGlmIChoLnRpdGxlICYmIG1hdGNoUXVlcnkocXVlcnksIHAsIGgudGl0bGUpKSB7CiAgICAgICAgICAgICAgcmVzLnB1c2gocCk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHJlczsKICAgIH0sCgogICAgLy8gbWFrZSBzdWdnZXN0aW9ucyBhbGlnbiByaWdodCB3aGVuIHRoZXJlIGFyZSBub3QgZW5vdWdoIGl0ZW1zCiAgICBhbGlnblJpZ2h0KCkgewogICAgICBjb25zdCBuYXZDb3VudCA9ICh0aGlzLiRzaXRlLnRoZW1lQ29uZmlnLm5hdiB8fCBbXSkubGVuZ3RoOwogICAgICBjb25zdCByZXBvID0gdGhpcy4kc2l0ZS5yZXBvID8gMSA6IDA7CiAgICAgIHJldHVybiBuYXZDb3VudCArIHJlcG8gPD0gMjsKICAgIH0KICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5wbGFjZWhvbGRlciA9IHRoaXMuJHNpdGUudGhlbWVDb25maWcuc2VhcmNoUGxhY2Vob2xkZXIgfHwgIiI7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgdGhpcy5vbkhvdGtleSk7CiAgfSwKCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoImtleWRvd24iLCB0aGlzLm9uSG90a2V5KTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBnZXRQYWdlTG9jYWxlUGF0aChwYWdlKSB7CiAgICAgIGZvciAoY29uc3QgbG9jYWxlUGF0aCBpbiB0aGlzLiRzaXRlLmxvY2FsZXMgfHwge30pIHsKICAgICAgICBpZiAobG9jYWxlUGF0aCAhPT0gIi8iICYmIHBhZ2UucGF0aC5pbmRleE9mKGxvY2FsZVBhdGgpID09PSAwKSB7CiAgICAgICAgICByZXR1cm4gbG9jYWxlUGF0aDsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuICIvIjsKICAgIH0sCgogICAgaXNTZWFyY2hhYmxlKHBhZ2UpIHsKICAgICAgbGV0IHNlYXJjaFBhdGhzID0gU0VBUkNIX1BBVEhTOwoKICAgICAgLy8gYWxsIHBhdGhzIHNlYXJjaGFibGVzCiAgICAgIGlmIChzZWFyY2hQYXRocyA9PT0gbnVsbCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICBzZWFyY2hQYXRocyA9IEFycmF5LmlzQXJyYXkoc2VhcmNoUGF0aHMpCiAgICAgICAgPyBzZWFyY2hQYXRocwogICAgICAgIDogbmV3IEFycmF5KHNlYXJjaFBhdGhzKTsKCiAgICAgIHJldHVybiAoCiAgICAgICAgc2VhcmNoUGF0aHMuZmlsdGVyKChwYXRoKSA9PiB7CiAgICAgICAgICByZXR1cm4gcGFnZS5wYXRoLm1hdGNoKHBhdGgpOwogICAgICAgIH0pLmxlbmd0aCA+IDAKICAgICAgKTsKICAgIH0sCgogICAgb25Ib3RrZXkoZXZlbnQpIHsKICAgICAgaWYgKAogICAgICAgIGV2ZW50LnNyY0VsZW1lbnQgPT09IGRvY3VtZW50LmJvZHkgJiYKICAgICAgICBTRUFSQ0hfSE9US0VZUy5pbmNsdWRlcyhldmVudC5rZXkpCiAgICAgICkgewogICAgICAgIHRoaXMuJHJlZnMuaW5wdXQuZm9jdXMoKTsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CiAgICB9LAoKICAgIG9uVXAoKSB7CiAgICAgIGlmICh0aGlzLnNob3dTdWdnZXN0aW9ucykgewogICAgICAgIGlmICh0aGlzLmZvY3VzSW5kZXggPiAwKSB7CiAgICAgICAgICB0aGlzLmZvY3VzSW5kZXgtLTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5mb2N1c0luZGV4ID0gdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggLSAxOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBvbkRvd24oKSB7CiAgICAgIGlmICh0aGlzLnNob3dTdWdnZXN0aW9ucykgewogICAgICAgIGlmICh0aGlzLmZvY3VzSW5kZXggPCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCAtIDEpIHsKICAgICAgICAgIHRoaXMuZm9jdXNJbmRleCsrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmZvY3VzSW5kZXggPSAwOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBnbyhpKSB7CiAgICAgIGlmICghdGhpcy5zaG93U3VnZ2VzdGlvbnMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy4kcm91dGVyLnB1c2godGhpcy5zdWdnZXN0aW9uc1tpXS5wYXRoKTsKICAgICAgdGhpcy5xdWVyeSA9ICIiOwogICAgICB0aGlzLmZvY3VzSW5kZXggPSAwOwogICAgfSwKCiAgICBmb2N1cyhpKSB7CiAgICAgIHRoaXMuZm9jdXNJbmRleCA9IGk7CiAgICB9LAoKICAgIHVuZm9jdXMoKSB7CiAgICAgIHRoaXMuZm9jdXNJbmRleCA9IC0xOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["SearchPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"SearchPage.vue","sourceRoot":"packages/theme-gungnir/components","sourcesContent":["<template>\n  <div class=\"search-page\">\n    <span class=\"search-close\" @click=\"$emit('toggle-search')\">\n      <v-icon name=\"fa-chevron-down\" scale=\"1.8\" />\n    </span>\n    <div class=\"search-box\">\n      <input\n        ref=\"input\"\n        aria-label=\"Search\"\n        :value=\"query\"\n        :class=\"{ focused: focused }\"\n        :placeholder=\"placeholder\"\n        autocomplete=\"off\"\n        spellcheck=\"false\"\n        @input=\"query = $event.target.value\"\n        @focus=\"focused = true\"\n        @blur=\"focused = false\"\n        @keyup.enter=\"go(focusIndex)\"\n        @keyup.up=\"onUp\"\n        @keyup.down=\"onDown\"\n      />\n      <ul\n        v-if=\"showSuggestions\"\n        class=\"suggestions\"\n        :class=\"{ 'align-right': alignRight }\"\n        @mouseleave=\"unfocus\"\n      >\n        <li\n          v-for=\"(s, i) in suggestions\"\n          :key=\"i\"\n          class=\"suggestion\"\n          :class=\"{ focused: i === focusIndex }\"\n          @mousedown=\"go(i)\"\n          @mouseenter=\"focus(i)\"\n        >\n          <a :href=\"s.path\" @click.prevent>\n            <span class=\"page-title\">\n              {{ s.title || s.path }}\n            </span>\n            <span v-if=\"s.frontmatter.subtitle\" class=\"header\">\n              {{ s.frontmatter.subtitle }}\n            </span>\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport matchQuery from \"@vuepress/plugin-search/match-query\";\n\n/* global SEARCH_MAX_SUGGESTIONS, SEARCH_PATHS, SEARCH_HOTKEYS */\nexport default {\n  name: \"SearchBox\",\n\n  data() {\n    return {\n      query: \"\",\n      focused: false,\n      focusIndex: 0,\n      placeholder: undefined\n    };\n  },\n\n  computed: {\n    showSuggestions() {\n      return this.suggestions && this.suggestions.length;\n    },\n\n    suggestions() {\n      const query = this.query.trim().toLowerCase();\n      if (!query) {\n        return;\n      }\n\n      const { pages } = this.$site;\n      const max =\n        this.$site.themeConfig.searchMaxSuggestions || SEARCH_MAX_SUGGESTIONS;\n      const localePath = this.$localePath;\n      const res = [];\n      for (let i = 0; i < pages.length; i++) {\n        if (res.length >= max) break;\n        const p = pages[i];\n\n        // we only search posts\n        if (p.id != \"posts\") {\n          continue;\n        }\n\n        // filter out results that do not match current locale\n        if (this.getPageLocalePath(p) !== localePath) {\n          continue;\n        }\n\n        // filter out results that do not match searchable paths\n        if (!this.isSearchable(p)) {\n          continue;\n        }\n\n        // title and tags\n        if (matchQuery(query, p)) {\n          res.push(p);\n        }\n        // subtitle\n        else if (\n          p.frontmatter.subtitle &&\n          matchQuery(query, p, p.frontmatter.subtitle)\n        ) {\n          res.push(p);\n        }\n        // headers\n        else if (p.headers) {\n          for (let j = 0; j < p.headers.length; j++) {\n            if (res.length >= max) break;\n            const h = p.headers[j];\n            if (h.title && matchQuery(query, p, h.title)) {\n              res.push(p);\n              break;\n            }\n          }\n        }\n      }\n      return res;\n    },\n\n    // make suggestions align right when there are not enough items\n    alignRight() {\n      const navCount = (this.$site.themeConfig.nav || []).length;\n      const repo = this.$site.repo ? 1 : 0;\n      return navCount + repo <= 2;\n    }\n  },\n\n  mounted() {\n    this.placeholder = this.$site.themeConfig.searchPlaceholder || \"\";\n    document.addEventListener(\"keydown\", this.onHotkey);\n  },\n\n  beforeDestroy() {\n    document.removeEventListener(\"keydown\", this.onHotkey);\n  },\n\n  methods: {\n    getPageLocalePath(page) {\n      for (const localePath in this.$site.locales || {}) {\n        if (localePath !== \"/\" && page.path.indexOf(localePath) === 0) {\n          return localePath;\n        }\n      }\n      return \"/\";\n    },\n\n    isSearchable(page) {\n      let searchPaths = SEARCH_PATHS;\n\n      // all paths searchables\n      if (searchPaths === null) {\n        return true;\n      }\n\n      searchPaths = Array.isArray(searchPaths)\n        ? searchPaths\n        : new Array(searchPaths);\n\n      return (\n        searchPaths.filter((path) => {\n          return page.path.match(path);\n        }).length > 0\n      );\n    },\n\n    onHotkey(event) {\n      if (\n        event.srcElement === document.body &&\n        SEARCH_HOTKEYS.includes(event.key)\n      ) {\n        this.$refs.input.focus();\n        event.preventDefault();\n      }\n    },\n\n    onUp() {\n      if (this.showSuggestions) {\n        if (this.focusIndex > 0) {\n          this.focusIndex--;\n        } else {\n          this.focusIndex = this.suggestions.length - 1;\n        }\n      }\n    },\n\n    onDown() {\n      if (this.showSuggestions) {\n        if (this.focusIndex < this.suggestions.length - 1) {\n          this.focusIndex++;\n        } else {\n          this.focusIndex = 0;\n        }\n      }\n    },\n\n    go(i) {\n      if (!this.showSuggestions) {\n        return;\n      }\n      this.$router.push(this.suggestions[i].path);\n      this.query = \"\";\n      this.focusIndex = 0;\n    },\n\n    focus(i) {\n      this.focusIndex = i;\n    },\n\n    unfocus() {\n      this.focusIndex = -1;\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\">\n@require '../styles/mode.styl'\n@require '../styles/mixins.styl'\n\n.search-page\n  background-color var(--bg-color)\n  position fixed\n  bottom 0\n  left 0\n  width 100%\n  height 100%\n  margin 0\n  overflow hidden\n  z-index 50\n  transition(transform .25s)\n  transform(translateY(100%))\n  .search-close\n    float right\n    margin-right 25px\n    margin-top 25px\n    color #bdbbbb\n    transition(.3s ease)\n    &:hover\n      color #696868\n  .search-box\n    margin 100px auto 0\n    display block\n    width 50%\n    height 100%\n    input\n      gungnir-font()\n      width 100%\n      height auto\n      font-size 28px\n      font-weight bold\n      padding 5px 0\n      border none\n      outline none\n      background transparent\n      color var(--text-color)\n      &::-webkit-input-placeholder\n        color var(--text-color-sub)\n      &::-moz-placeholder\n        color var(--text-color-sub)\n      &:-moz-placeholder\n        color var(--text-color-sub)\n      &:-ms-input-placeholder\n        color var(--text-color-sub)\n    .suggestions\n      gungnir-font()\n      height 70%\n      width 100%\n      margin-top 30px\n      overflow-y scroll\n      padding 0\n      .suggestion\n        padding 0.6rem 0\n        a\n          white-space normal\n          color var(--text-color)\n          .page-title\n            font-size 20px\n            line-height 1.5\n            font-weight 600\n            display block\n          .header\n            font-size 16px\n            line-height 1.5\n            margin-top 5px\n            display block\n            margin-left 0\n        &.focused\n          background-color transparent\n          a\n            color var(--accent-color)\n\n@media (max-width: $MQIpad)\n  .search-page\n    .search-box\n        width 80%\n\n@media (max-width: $MQMobileNarrow)\n  .search-page\n    .search-box\n      input\n        font-size 24px\n      .suggestions\n        margin-top 20px\n        padding 0\n        .suggestion\n          padding 0.4rem 0\n          a\n            .page-title\n              font-size 18px\n              line-height 1.3\n            .header\n              font-size 14px\n              line-height 1.3\n</style>\n"]}]}