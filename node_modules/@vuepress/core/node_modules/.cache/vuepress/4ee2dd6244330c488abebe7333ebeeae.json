{"remainingRequest":"/Users/chenzhe/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenzhe/blog/packages/theme-gungnir/components/SearchPage.vue?vue&type=style&index=0&lang=stylus&","dependencies":[{"path":"/Users/chenzhe/blog/packages/theme-gungnir/components/SearchPage.vue","mtime":1630639090000},{"path":"/Users/chenzhe/blog/node_modules/css-loader/dist/cjs.js","mtime":1632030570508},{"path":"/Users/chenzhe/blog/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1632030570748},{"path":"/Users/chenzhe/blog/node_modules/postcss-loader/src/index.js","mtime":1623130371850},{"path":"/Users/chenzhe/blog/node_modules/stylus-loader/index.js","mtime":1632030571145},{"path":"/Users/chenzhe/blog/node_modules/cache-loader/dist/cjs.js","mtime":1632030570429},{"path":"/Users/chenzhe/blog/node_modules/vue-loader/lib/index.js","mtime":1632030570748}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkByZXF1aXJlICcuLi9zdHlsZXMvbW9kZS5zdHlsJwpAcmVxdWlyZSAnLi4vc3R5bGVzL21peGlucy5zdHlsJwoKLnNlYXJjaC1wYWdlCiAgYmFja2dyb3VuZC1jb2xvciB2YXIoLS1iZy1jb2xvcikKICBwb3NpdGlvbiBmaXhlZAogIGJvdHRvbSAwCiAgbGVmdCAwCiAgd2lkdGggMTAwJQogIGhlaWdodCAxMDAlCiAgbWFyZ2luIDAKICBvdmVyZmxvdyBoaWRkZW4KICB6LWluZGV4IDUwCiAgdHJhbnNpdGlvbih0cmFuc2Zvcm0gLjI1cykKICB0cmFuc2Zvcm0odHJhbnNsYXRlWSgxMDAlKSkKICAuc2VhcmNoLWNsb3NlCiAgICBmbG9hdCByaWdodAogICAgbWFyZ2luLXJpZ2h0IDI1cHgKICAgIG1hcmdpbi10b3AgMjVweAogICAgY29sb3IgI2JkYmJiYgogICAgdHJhbnNpdGlvbiguM3MgZWFzZSkKICAgICY6aG92ZXIKICAgICAgY29sb3IgIzY5Njg2OAogIC5zZWFyY2gtYm94CiAgICBtYXJnaW4gMTAwcHggYXV0byAwCiAgICBkaXNwbGF5IGJsb2NrCiAgICB3aWR0aCA1MCUKICAgIGhlaWdodCAxMDAlCiAgICBpbnB1dAogICAgICBndW5nbmlyLWZvbnQoKQogICAgICB3aWR0aCAxMDAlCiAgICAgIGhlaWdodCBhdXRvCiAgICAgIGZvbnQtc2l6ZSAyOHB4CiAgICAgIGZvbnQtd2VpZ2h0IGJvbGQKICAgICAgcGFkZGluZyA1cHggMAogICAgICBib3JkZXIgbm9uZQogICAgICBvdXRsaW5lIG5vbmUKICAgICAgYmFja2dyb3VuZCB0cmFuc3BhcmVudAogICAgICBjb2xvciB2YXIoLS10ZXh0LWNvbG9yKQogICAgICAmOjotd2Via2l0LWlucHV0LXBsYWNlaG9sZGVyCiAgICAgICAgY29sb3IgdmFyKC0tdGV4dC1jb2xvci1zdWIpCiAgICAgICY6Oi1tb3otcGxhY2Vob2xkZXIKICAgICAgICBjb2xvciB2YXIoLS10ZXh0LWNvbG9yLXN1YikKICAgICAgJjotbW96LXBsYWNlaG9sZGVyCiAgICAgICAgY29sb3IgdmFyKC0tdGV4dC1jb2xvci1zdWIpCiAgICAgICY6LW1zLWlucHV0LXBsYWNlaG9sZGVyCiAgICAgICAgY29sb3IgdmFyKC0tdGV4dC1jb2xvci1zdWIpCiAgICAuc3VnZ2VzdGlvbnMKICAgICAgZ3VuZ25pci1mb250KCkKICAgICAgaGVpZ2h0IDcwJQogICAgICB3aWR0aCAxMDAlCiAgICAgIG1hcmdpbi10b3AgMzBweAogICAgICBvdmVyZmxvdy15IHNjcm9sbAogICAgICBwYWRkaW5nIDAKICAgICAgLnN1Z2dlc3Rpb24KICAgICAgICBwYWRkaW5nIDAuNnJlbSAwCiAgICAgICAgYQogICAgICAgICAgd2hpdGUtc3BhY2Ugbm9ybWFsCiAgICAgICAgICBjb2xvciB2YXIoLS10ZXh0LWNvbG9yKQogICAgICAgICAgLnBhZ2UtdGl0bGUKICAgICAgICAgICAgZm9udC1zaXplIDIwcHgKICAgICAgICAgICAgbGluZS1oZWlnaHQgMS41CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0IDYwMAogICAgICAgICAgICBkaXNwbGF5IGJsb2NrCiAgICAgICAgICAuaGVhZGVyCiAgICAgICAgICAgIGZvbnQtc2l6ZSAxNnB4CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0IDEuNQogICAgICAgICAgICBtYXJnaW4tdG9wIDVweAogICAgICAgICAgICBkaXNwbGF5IGJsb2NrCiAgICAgICAgICAgIG1hcmdpbi1sZWZ0IDAKICAgICAgICAmLmZvY3VzZWQKICAgICAgICAgIGJhY2tncm91bmQtY29sb3IgdHJhbnNwYXJlbnQKICAgICAgICAgIGEKICAgICAgICAgICAgY29sb3IgdmFyKC0tYWNjZW50LWNvbG9yKQoKQG1lZGlhIChtYXgtd2lkdGg6ICRNUUlwYWQpCiAgLnNlYXJjaC1wYWdlCiAgICAuc2VhcmNoLWJveAogICAgICAgIHdpZHRoIDgwJQoKQG1lZGlhIChtYXgtd2lkdGg6ICRNUU1vYmlsZU5hcnJvdykKICAuc2VhcmNoLXBhZ2UKICAgIC5zZWFyY2gtYm94CiAgICAgIGlucHV0CiAgICAgICAgZm9udC1zaXplIDI0cHgKICAgICAgLnN1Z2dlc3Rpb25zCiAgICAgICAgbWFyZ2luLXRvcCAyMHB4CiAgICAgICAgcGFkZGluZyAwCiAgICAgICAgLnN1Z2dlc3Rpb24KICAgICAgICAgIHBhZGRpbmcgMC40cmVtIDAKICAgICAgICAgIGEKICAgICAgICAgICAgLnBhZ2UtdGl0bGUKICAgICAgICAgICAgICBmb250LXNpemUgMThweAogICAgICAgICAgICAgIGxpbmUtaGVpZ2h0IDEuMwogICAgICAgICAgICAuaGVhZGVyCiAgICAgICAgICAgICAgZm9udC1zaXplIDE0cHgKICAgICAgICAgICAgICBsaW5lLWhlaWdodCAxLjMK"},{"version":3,"sources":["SearchPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+NA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SearchPage.vue","sourceRoot":"packages/theme-gungnir/components","sourcesContent":["<template>\n  <div class=\"search-page\">\n    <span class=\"search-close\" @click=\"$emit('toggle-search')\">\n      <v-icon name=\"fa-chevron-down\" scale=\"1.8\" />\n    </span>\n    <div class=\"search-box\">\n      <input\n        ref=\"input\"\n        aria-label=\"Search\"\n        :value=\"query\"\n        :class=\"{ focused: focused }\"\n        :placeholder=\"placeholder\"\n        autocomplete=\"off\"\n        spellcheck=\"false\"\n        @input=\"query = $event.target.value\"\n        @focus=\"focused = true\"\n        @blur=\"focused = false\"\n        @keyup.enter=\"go(focusIndex)\"\n        @keyup.up=\"onUp\"\n        @keyup.down=\"onDown\"\n      />\n      <ul\n        v-if=\"showSuggestions\"\n        class=\"suggestions\"\n        :class=\"{ 'align-right': alignRight }\"\n        @mouseleave=\"unfocus\"\n      >\n        <li\n          v-for=\"(s, i) in suggestions\"\n          :key=\"i\"\n          class=\"suggestion\"\n          :class=\"{ focused: i === focusIndex }\"\n          @mousedown=\"go(i)\"\n          @mouseenter=\"focus(i)\"\n        >\n          <a :href=\"s.path\" @click.prevent>\n            <span class=\"page-title\">\n              {{ s.title || s.path }}\n            </span>\n            <span v-if=\"s.frontmatter.subtitle\" class=\"header\">\n              {{ s.frontmatter.subtitle }}\n            </span>\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport matchQuery from \"@vuepress/plugin-search/match-query\";\n\n/* global SEARCH_MAX_SUGGESTIONS, SEARCH_PATHS, SEARCH_HOTKEYS */\nexport default {\n  name: \"SearchBox\",\n\n  data() {\n    return {\n      query: \"\",\n      focused: false,\n      focusIndex: 0,\n      placeholder: undefined\n    };\n  },\n\n  computed: {\n    showSuggestions() {\n      return this.suggestions && this.suggestions.length;\n    },\n\n    suggestions() {\n      const query = this.query.trim().toLowerCase();\n      if (!query) {\n        return;\n      }\n\n      const { pages } = this.$site;\n      const max =\n        this.$site.themeConfig.searchMaxSuggestions || SEARCH_MAX_SUGGESTIONS;\n      const localePath = this.$localePath;\n      const res = [];\n      for (let i = 0; i < pages.length; i++) {\n        if (res.length >= max) break;\n        const p = pages[i];\n\n        // we only search posts\n        if (p.id != \"posts\") {\n          continue;\n        }\n\n        // filter out results that do not match current locale\n        if (this.getPageLocalePath(p) !== localePath) {\n          continue;\n        }\n\n        // filter out results that do not match searchable paths\n        if (!this.isSearchable(p)) {\n          continue;\n        }\n\n        // title and tags\n        if (matchQuery(query, p)) {\n          res.push(p);\n        }\n        // subtitle\n        else if (\n          p.frontmatter.subtitle &&\n          matchQuery(query, p, p.frontmatter.subtitle)\n        ) {\n          res.push(p);\n        }\n        // headers\n        else if (p.headers) {\n          for (let j = 0; j < p.headers.length; j++) {\n            if (res.length >= max) break;\n            const h = p.headers[j];\n            if (h.title && matchQuery(query, p, h.title)) {\n              res.push(p);\n              break;\n            }\n          }\n        }\n      }\n      return res;\n    },\n\n    // make suggestions align right when there are not enough items\n    alignRight() {\n      const navCount = (this.$site.themeConfig.nav || []).length;\n      const repo = this.$site.repo ? 1 : 0;\n      return navCount + repo <= 2;\n    }\n  },\n\n  mounted() {\n    this.placeholder = this.$site.themeConfig.searchPlaceholder || \"\";\n    document.addEventListener(\"keydown\", this.onHotkey);\n  },\n\n  beforeDestroy() {\n    document.removeEventListener(\"keydown\", this.onHotkey);\n  },\n\n  methods: {\n    getPageLocalePath(page) {\n      for (const localePath in this.$site.locales || {}) {\n        if (localePath !== \"/\" && page.path.indexOf(localePath) === 0) {\n          return localePath;\n        }\n      }\n      return \"/\";\n    },\n\n    isSearchable(page) {\n      let searchPaths = SEARCH_PATHS;\n\n      // all paths searchables\n      if (searchPaths === null) {\n        return true;\n      }\n\n      searchPaths = Array.isArray(searchPaths)\n        ? searchPaths\n        : new Array(searchPaths);\n\n      return (\n        searchPaths.filter((path) => {\n          return page.path.match(path);\n        }).length > 0\n      );\n    },\n\n    onHotkey(event) {\n      if (\n        event.srcElement === document.body &&\n        SEARCH_HOTKEYS.includes(event.key)\n      ) {\n        this.$refs.input.focus();\n        event.preventDefault();\n      }\n    },\n\n    onUp() {\n      if (this.showSuggestions) {\n        if (this.focusIndex > 0) {\n          this.focusIndex--;\n        } else {\n          this.focusIndex = this.suggestions.length - 1;\n        }\n      }\n    },\n\n    onDown() {\n      if (this.showSuggestions) {\n        if (this.focusIndex < this.suggestions.length - 1) {\n          this.focusIndex++;\n        } else {\n          this.focusIndex = 0;\n        }\n      }\n    },\n\n    go(i) {\n      if (!this.showSuggestions) {\n        return;\n      }\n      this.$router.push(this.suggestions[i].path);\n      this.query = \"\";\n      this.focusIndex = 0;\n    },\n\n    focus(i) {\n      this.focusIndex = i;\n    },\n\n    unfocus() {\n      this.focusIndex = -1;\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\">\n@require '../styles/mode.styl'\n@require '../styles/mixins.styl'\n\n.search-page\n  background-color var(--bg-color)\n  position fixed\n  bottom 0\n  left 0\n  width 100%\n  height 100%\n  margin 0\n  overflow hidden\n  z-index 50\n  transition(transform .25s)\n  transform(translateY(100%))\n  .search-close\n    float right\n    margin-right 25px\n    margin-top 25px\n    color #bdbbbb\n    transition(.3s ease)\n    &:hover\n      color #696868\n  .search-box\n    margin 100px auto 0\n    display block\n    width 50%\n    height 100%\n    input\n      gungnir-font()\n      width 100%\n      height auto\n      font-size 28px\n      font-weight bold\n      padding 5px 0\n      border none\n      outline none\n      background transparent\n      color var(--text-color)\n      &::-webkit-input-placeholder\n        color var(--text-color-sub)\n      &::-moz-placeholder\n        color var(--text-color-sub)\n      &:-moz-placeholder\n        color var(--text-color-sub)\n      &:-ms-input-placeholder\n        color var(--text-color-sub)\n    .suggestions\n      gungnir-font()\n      height 70%\n      width 100%\n      margin-top 30px\n      overflow-y scroll\n      padding 0\n      .suggestion\n        padding 0.6rem 0\n        a\n          white-space normal\n          color var(--text-color)\n          .page-title\n            font-size 20px\n            line-height 1.5\n            font-weight 600\n            display block\n          .header\n            font-size 16px\n            line-height 1.5\n            margin-top 5px\n            display block\n            margin-left 0\n        &.focused\n          background-color transparent\n          a\n            color var(--accent-color)\n\n@media (max-width: $MQIpad)\n  .search-page\n    .search-box\n        width 80%\n\n@media (max-width: $MQMobileNarrow)\n  .search-page\n    .search-box\n      input\n        font-size 24px\n      .suggestions\n        margin-top 20px\n        padding 0\n        .suggestion\n          padding 0.4rem 0\n          a\n            .page-title\n              font-size 18px\n              line-height 1.3\n            .header\n              font-size 14px\n              line-height 1.3\n</style>\n"]}]}