{"remainingRequest":"/Users/chenzhe/blog/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/chenzhe/blog/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/chenzhe/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenzhe/blog/packages/plugins/markmap/lib/Markmap.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenzhe/blog/packages/plugins/markmap/lib/Markmap.vue","mtime":1630639090000},{"path":"/Users/chenzhe/blog/node_modules/cache-loader/dist/cjs.js","mtime":1632030570429},{"path":"/Users/chenzhe/blog/node_modules/babel-loader/lib/index.js","mtime":1623926664360},{"path":"/Users/chenzhe/blog/node_modules/cache-loader/dist/cjs.js","mtime":1632030570429},{"path":"/Users/chenzhe/blog/node_modules/vue-loader/lib/index.js","mtime":1632030570748}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgdHJhbnNmb3JtLCBnZXRVc2VkQXNzZXRzIH0gZnJvbSAibWFya21hcC1saWIvZGlzdC90cmFuc2Zvcm0iOwppbXBvcnQgeyBNYXJrbWFwLCBsb2FkQ1NTLCBsb2FkSlMgfSBmcm9tICJtYXJrbWFwLWxpYi9kaXN0L3ZpZXciOwppbXBvcnQgKiBhcyBtYXJrbWFwIGZyb20gIm1hcmttYXAtbGliL2Rpc3QvdmlldyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTWFya21hcCIsCiAgcHJvcHM6IHsKICAgIGlkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBjb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtbTogbnVsbAogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvLyB0cmFuc2Zvcm0gbWFya2Rvd24KICAgIHZhciBfdHJhbnNmb3JtID0gdHJhbnNmb3JtKHRoaXMuY29kZSksCiAgICAgICAgcm9vdCA9IF90cmFuc2Zvcm0ucm9vdCwKICAgICAgICBmZWF0dXJlcyA9IF90cmFuc2Zvcm0uZmVhdHVyZXM7IC8vIGdldCBhc3NldHMgcmVxdWlyZWQgYnkgdXNlZCBmZWF0dXJlcwoKCiAgICB2YXIgX2dldFVzZWRBc3NldHMgPSBnZXRVc2VkQXNzZXRzKGZlYXR1cmVzKSwKICAgICAgICBzdHlsZXMgPSBfZ2V0VXNlZEFzc2V0cy5zdHlsZXMsCiAgICAgICAgc2NyaXB0cyA9IF9nZXRVc2VkQXNzZXRzLnNjcmlwdHM7IC8vIGxvYWQgYXNzZXRzCgoKICAgIGlmIChzdHlsZXMpIGxvYWRDU1Moc3R5bGVzKTsKICAgIGlmIChzY3JpcHRzKSBsb2FkSlMoc2NyaXB0cywgewogICAgICBnZXRNYXJrbWFwOiBmdW5jdGlvbiBnZXRNYXJrbWFwKCkgewogICAgICAgIHJldHVybiBtYXJrbWFwOwogICAgICB9CiAgICB9KTsgLy8gY3JlYXRlIG1hcmttYXAKCiAgICB2YXIgc3ZnID0gdGhpcy4kcmVmcy5tYXJrbWFwOwogICAgdGhpcy5tbSA9IE1hcmttYXAuY3JlYXRlKHN2ZywgbnVsbCwgcm9vdCk7CiAgICB0aGlzLnJlc2NhbGUoKTsgLy8gcmVzY2FsZSBncmFwaCB3aGVuIHdpbmRvdyBzaXplIGNoYW5nZXMKCiAgICB2YXIgdGhhdCA9IHRoaXM7CgogICAgd2luZG93Lm9ucmVzaXplID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgIHRoYXQucmVzY2FsZSgpOwogICAgICB9KCk7CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcmVzY2FsZTogZnVuY3Rpb24gcmVzY2FsZSgpIHsKICAgICAgLy8gcmVzaXplIHN2ZyBhbmQgZml0IGdyYXBoCiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nZXJhMmxkL21hcmttYXAvaXNzdWVzLzYzCiAgICAgIHZhciBzdmcgPSB0aGlzLiRyZWZzLm1hcmttYXA7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhpcy5tbS5yZXNjYWxlKDEpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHN2Zy5zdHlsZS5oZWlnaHQgPSBzdmcuZ2V0QkJveCgpLmhlaWdodCArIDEwICsgInB4IjsKICAgICAgICB0aGF0Lm1tLmZpdCgpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/chenzhe/blog/packages/plugins/markmap/lib/Markmap.vue"],"names":["transform","getUsedAssets","Markmap","loadCSS","loadJS","markmap","name","props","id","type","String","required","code","data","mm","mounted","root","features","styles","scripts","getMarkmap","svg","$refs","create","rescale","that","window","onresize","methods","then","style","height","getBBox","fit"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,SAAT,EAAoBC,aAApB,QAAyC,4BAAzC;AACA,SAASC,OAAT,EAAkBC,OAAlB,EAA2BC,MAA3B,QAAyC,uBAAzC;AACA,OAAO,KAAKC,OAAZ,MAAyB,uBAAzB;AAEA,eAAe;AACbC,EAAAA,IAAI,EAAE,SADO;AAEbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,EAAE,EAAE;AACFC,MAAAA,IAAI,EAAEC,MADJ;AAEFC,MAAAA,QAAQ,EAAE;AAFR,KADC;AAKLC,IAAAA,IAAI,EAAE;AACJH,MAAAA,IAAI,EAAEC,MADF;AAEJC,MAAAA,QAAQ,EAAE;AAFN;AALD,GAFM;AAYbE,EAAAA,IAZa,kBAYN;AACL,WAAO;AACLC,MAAAA,EAAE,EAAE;AADC,KAAP;AAGD,GAhBY;AAiBbC,EAAAA,OAjBa,qBAiBH;AACR;AADQ,qBAEmBf,SAAS,CAAC,KAAKY,IAAN,CAF5B;AAAA,QAEAI,IAFA,cAEAA,IAFA;AAAA,QAEMC,QAFN,cAEMA,QAFN,EAGR;;;AAHQ,yBAIoBhB,aAAa,CAACgB,QAAD,CAJjC;AAAA,QAIAC,MAJA,kBAIAA,MAJA;AAAA,QAIQC,OAJR,kBAIQA,OAJR,EAMR;;;AACA,QAAID,MAAJ,EAAYf,OAAO,CAACe,MAAD,CAAP;AACZ,QAAIC,OAAJ,EAAaf,MAAM,CAACe,OAAD,EAAU;AAAEC,MAAAA,UAAU,EAAE;AAAA,eAAMf,OAAN;AAAA;AAAd,KAAV,CAAN,CARL,CAUR;;AACA,QAAMgB,GAAG,GAAG,KAAKC,KAAL,CAAWjB,OAAvB;AACA,SAAKS,EAAL,GAAUZ,OAAO,CAACqB,MAAR,CAAeF,GAAf,EAAoB,IAApB,EAA0BL,IAA1B,CAAV;AACA,SAAKQ,OAAL,GAbQ,CAeR;;AACA,QAAMC,IAAI,GAAG,IAAb;;AACAC,IAAAA,MAAM,CAACC,QAAP,GAAkB,YAAM;AACtB,aAAQ,YAAM;AACZF,QAAAA,IAAI,CAACD,OAAL;AACD,OAFM,EAAP;AAGD,KAJD;AAKD,GAvCY;AAwCbI,EAAAA,OAAO,EAAE;AACPJ,IAAAA,OADO,qBACG;AACR;AACA;AACA,UAAMH,GAAG,GAAG,KAAKC,KAAL,CAAWjB,OAAvB;AACA,UAAMoB,IAAI,GAAG,IAAb;AACA,WAAKX,EAAL,CAAQU,OAAR,CAAgB,CAAhB,EAAmBK,IAAnB,CAAwB,YAAY;AAClCR,QAAAA,GAAG,CAACS,KAAJ,CAAUC,MAAV,GAAmBV,GAAG,CAACW,OAAJ,GAAcD,MAAd,GAAuB,EAAvB,GAA4B,IAA/C;AACAN,QAAAA,IAAI,CAACX,EAAL,CAAQmB,GAAR;AACD,OAHD;AAID;AAVM;AAxCI,CAAf","sourcesContent":["//\n//\n//\n//\n//\n//\n\nimport { transform, getUsedAssets } from \"markmap-lib/dist/transform\";\nimport { Markmap, loadCSS, loadJS } from \"markmap-lib/dist/view\";\nimport * as markmap from \"markmap-lib/dist/view\";\n\nexport default {\n  name: \"Markmap\",\n  props: {\n    id: {\n      type: String,\n      required: true\n    },\n    code: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      mm: null\n    };\n  },\n  mounted() {\n    // transform markdown\n    const { root, features } = transform(this.code);\n    // get assets required by used features\n    const { styles, scripts } = getUsedAssets(features);\n\n    // load assets\n    if (styles) loadCSS(styles);\n    if (scripts) loadJS(scripts, { getMarkmap: () => markmap });\n\n    // create markmap\n    const svg = this.$refs.markmap;\n    this.mm = Markmap.create(svg, null, root);\n    this.rescale();\n\n    // rescale graph when window size changes\n    const that = this;\n    window.onresize = () => {\n      return (() => {\n        that.rescale();\n      })();\n    };\n  },\n  methods: {\n    rescale() {\n      // resize svg and fit graph\n      // https://github.com/gera2ld/markmap/issues/63\n      const svg = this.$refs.markmap;\n      const that = this;\n      this.mm.rescale(1).then(function () {\n        svg.style.height = svg.getBBox().height + 10 + \"px\";\n        that.mm.fit();\n      });\n    }\n  }\n};\n"]}]}