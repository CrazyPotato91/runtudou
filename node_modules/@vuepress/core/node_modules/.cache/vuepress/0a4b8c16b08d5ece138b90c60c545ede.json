{"remainingRequest":"/Users/chenzhe/blog/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/chenzhe/blog/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/chenzhe/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenzhe/blog/packages/theme-gungnir/components/ToggleMode.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenzhe/blog/packages/theme-gungnir/components/ToggleMode.vue","mtime":1630639090000},{"path":"/Users/chenzhe/blog/node_modules/cache-loader/dist/cjs.js","mtime":1632030570429},{"path":"/Users/chenzhe/blog/node_modules/babel-loader/lib/index.js","mtime":1623926664360},{"path":"/Users/chenzhe/blog/node_modules/cache-loader/dist/cjs.js","mtime":1632030570429},{"path":"/Users/chenzhe/blog/node_modules/vue-loader/lib/index.js","mtime":1632030570748}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBtb2RlT3B0aW9ucyA9IFsibGlnaHQiLCAiZGFyayIsICJhdXRvIl07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVXNlclNldHRpbmdzIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3VycmVudE1vZGU6ICJhdXRvIgogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBuZXh0TW9kZTogZnVuY3Rpb24gbmV4dE1vZGUoKSB7CiAgICAgIHZhciBjdXJyZW50SW5kZXggPSBtb2RlT3B0aW9ucy5pbmRleE9mKHRoaXMuY3VycmVudE1vZGUpOwogICAgICB2YXIgbmV4dEluZGV4ID0gKGN1cnJlbnRJbmRleCArIDEpICUgbW9kZU9wdGlvbnMubGVuZ3RoOwogICAgICByZXR1cm4gbW9kZU9wdGlvbnNbbmV4dEluZGV4XTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvLyBnZXQgdXNlciBwcmVmZXJlbmNlIG1vZGUKICAgIHRoaXMuY3VycmVudE1vZGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibW9kZSIpIHx8IHRoaXMuJHRoZW1lQ29uZmlnLm1vZGUgfHwgImF1dG8iOyAvLyBkYXJrIGFuZCBsaWdodCBhdXRvc3dpdGNoZXMKCiAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICB3aW5kb3cubWF0Y2hNZWRpYSgiKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKSIpLmFkZExpc3RlbmVyKGZ1bmN0aW9uICgpIHsKICAgICAgdGhhdC4kZGF0YS5jdXJyZW50TW9kZSA9PT0gImF1dG8iICYmIHRoYXQuYXBwbHlNb2RlKHRoYXQuJGRhdGEuY3VycmVudE1vZGUpOwogICAgfSk7CiAgICB3aW5kb3cubWF0Y2hNZWRpYSgiKHByZWZlcnMtY29sb3Itc2NoZW1lOiBsaWdodCkiKS5hZGRMaXN0ZW5lcihmdW5jdGlvbiAoKSB7CiAgICAgIHRoYXQuJGRhdGEuY3VycmVudE1vZGUgPT09ICJhdXRvIiAmJiB0aGF0LmFwcGx5TW9kZSh0aGF0LiRkYXRhLmN1cnJlbnRNb2RlKTsKICAgIH0pOwogICAgdGhpcy5hcHBseU1vZGUodGhpcy5jdXJyZW50TW9kZSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyBzd2l0Y2ggdG8gdGhlIG5leHQgbW9kZQogICAgdG9nZ2xlTW9kZTogZnVuY3Rpb24gdG9nZ2xlTW9kZSgpIHsKICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IG1vZGVPcHRpb25zLmluZGV4T2YodGhpcy5jdXJyZW50TW9kZSk7CiAgICAgIHZhciBuZXh0SW5kZXggPSAoY3VycmVudEluZGV4ICsgMSkgJSBtb2RlT3B0aW9ucy5sZW5ndGg7CiAgICAgIHRoaXMuYXBwbHlNb2RlKG1vZGVPcHRpb25zW25leHRJbmRleF0pOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgibW9kZSIsIG1vZGVPcHRpb25zW25leHRJbmRleF0pOwogICAgICB0aGlzLmN1cnJlbnRNb2RlID0gbW9kZU9wdGlvbnNbbmV4dEluZGV4XTsKICAgIH0sCiAgICBhcHBseU1vZGU6IGZ1bmN0aW9uIGFwcGx5TW9kZShtb2RlKSB7CiAgICAgIGlmIChtb2RlICE9PSAiYXV0byIpIHsKICAgICAgICB0aGlzLnNldE1vZGUobW9kZSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgaXNEYXJrTW9kZSA9IHdpbmRvdy5tYXRjaE1lZGlhKCIocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspIikubWF0Y2hlczsKICAgICAgdmFyIGlzTGlnaHRNb2RlID0gd2luZG93Lm1hdGNoTWVkaWEoIihwcmVmZXJzLWNvbG9yLXNjaGVtZTogbGlnaHQpIikubWF0Y2hlczsKICAgICAgaWYgKGlzRGFya01vZGUpIHRoaXMuc2V0TW9kZSgiZGFyayIpOwogICAgICBpZiAoaXNMaWdodE1vZGUpIHRoaXMuc2V0TW9kZSgibGlnaHQiKTsKCiAgICAgIGlmICghaXNEYXJrTW9kZSAmJiAhaXNMaWdodE1vZGUpIHsKICAgICAgICBjb25zb2xlLmxvZygiWW91IHNwZWNpZmllZCBubyBwcmVmZXJlbmNlIGZvciBhIGNvbG9yIHNjaGVtZSBvciB5b3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBpdC4gSSBzY2hlZHVsZSBkYXJrIG1vZGUgZHVyaW5nIG5pZ2h0IHRpbWUuIik7CiAgICAgICAgdmFyIGhvdXIgPSBuZXcgRGF0ZSgpLmdldEhvdXJzKCk7CiAgICAgICAgaWYgKGhvdXIgPCA2IHx8IGhvdXIgPj0gMTgpIHRoaXMuc2V0TW9kZSgiZGFyayIpO2Vsc2UgdGhpcy5zZXRNb2RlKCJsaWdodCIpOwogICAgICB9CiAgICB9LAogICAgc2V0TW9kZTogZnVuY3Rpb24gc2V0TW9kZShtb2RlKSB7CiAgICAgIGRvY3VtZW50LmJvZHkuc2V0QXR0cmlidXRlKCJkYXRhLXRoZW1lIiwgbW9kZSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/chenzhe/blog/packages/theme-gungnir/components/ToggleMode.vue"],"names":["modeOptions","name","data","currentMode","computed","nextMode","currentIndex","indexOf","nextIndex","length","mounted","localStorage","getItem","$themeConfig","mode","that","window","matchMedia","addListener","$data","applyMode","methods","toggleMode","setItem","setMode","isDarkMode","matches","isLightMode","console","log","hour","Date","getHours","document","body","setAttribute"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nlet modeOptions = [\"light\", \"dark\", \"auto\"];\n\nexport default {\n  name: \"UserSettings\",\n\n  data() {\n    return {\n      currentMode: \"auto\"\n    };\n  },\n\n  computed: {\n    nextMode() {\n      const currentIndex = modeOptions.indexOf(this.currentMode);\n      const nextIndex = (currentIndex + 1) % modeOptions.length;\n      return modeOptions[nextIndex];\n    }\n  },\n\n  mounted() {\n    // get user preference mode\n    this.currentMode =\n      localStorage.getItem(\"mode\") || this.$themeConfig.mode || \"auto\";\n\n    // dark and light autoswitches\n    var that = this;\n    window.matchMedia(\"(prefers-color-scheme: dark)\").addListener(() => {\n      that.$data.currentMode === \"auto\" &&\n        that.applyMode(that.$data.currentMode);\n    });\n    window.matchMedia(\"(prefers-color-scheme: light)\").addListener(() => {\n      that.$data.currentMode === \"auto\" &&\n        that.applyMode(that.$data.currentMode);\n    });\n\n    this.applyMode(this.currentMode);\n  },\n\n  methods: {\n    // switch to the next mode\n    toggleMode() {\n      const currentIndex = modeOptions.indexOf(this.currentMode);\n      const nextIndex = (currentIndex + 1) % modeOptions.length;\n\n      this.applyMode(modeOptions[nextIndex]);\n      localStorage.setItem(\"mode\", modeOptions[nextIndex]);\n\n      this.currentMode = modeOptions[nextIndex];\n    },\n    applyMode(mode) {\n      if (mode !== \"auto\") {\n        this.setMode(mode);\n        return;\n      }\n\n      const isDarkMode = window.matchMedia(\n        \"(prefers-color-scheme: dark)\"\n      ).matches;\n      const isLightMode = window.matchMedia(\n        \"(prefers-color-scheme: light)\"\n      ).matches;\n\n      if (isDarkMode) this.setMode(\"dark\");\n      if (isLightMode) this.setMode(\"light\");\n\n      if (!isDarkMode && !isLightMode) {\n        console.log(\n          \"You specified no preference for a color scheme or your browser does not support it. I schedule dark mode during night time.\"\n        );\n        const hour = new Date().getHours();\n        if (hour < 6 || hour >= 18) this.setMode(\"dark\");\n        else this.setMode(\"light\");\n      }\n    },\n    setMode(mode) {\n      document.body.setAttribute(\"data-theme\", mode);\n    }\n  }\n};\n"]}]}